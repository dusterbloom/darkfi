<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="rkyv"><meta name="keywords" content="rust, rustlang, rust-lang, rkyv"><title>rkyv - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-93196c7a1c3542a8.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="icon" href="
    data:image/svg+xml,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27;
    viewBox=&#x27;0 0 26.458 26.458&#x27;%3E%3Cpath d=&#x27;M0 0v26.458h26.458V0zm9.175 3.772l8.107 8.106
    2.702-2.702 2.702 13.512-13.512-2.702 2.703-2.702-8.107-8.107z&#x27;/%3E%3C/svg%3E
"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../rkyv/index.html"><img src="
    data:image/svg+xml,%3Csvg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;100&quot; height=&quot;100&quot;
    viewBox=&quot;0 0 26.458 26.458&quot;%3E%3Cpath d=&quot;M0 0v26.458h26.458V0zm9.175 3.772l8.107 8.106
    2.702-2.702 2.702 13.512-13.512-2.702 2.703-2.702-8.107-8.107z&quot;/%3E%3C/svg%3E
" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../rkyv/index.html">
                <img src="
    data:image/svg+xml,%3Csvg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;100&quot; height=&quot;100&quot;
    viewBox=&quot;0 0 26.458 26.458&quot;%3E%3Cpath d=&quot;M0 0v26.458h26.458V0zm9.175 3.772l8.107 8.106
    2.702-2.702 2.702 13.512-13.512-2.702 2.703-2.702-8.107-8.107z&quot;/%3E%3C/svg%3E
" alt="logo"></a><h2 class="location"><a href="#">Crate rkyv</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.7.40</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li><li><a href="#derives">Derive Macros</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">rkyv</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/rkyv/lib.rs.html#1-753">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="rkyv"><a href="#rkyv">rkyv</a></h2>
<p>rkyv (<em>archive</em>) is a zero-copy deserialization framework for Rust.</p>
<p>It’s similar to other zero-copy deserialization frameworks such as
<a href="https://capnproto.org">Cap’n Proto</a> and <a href="https://google.github.io/flatbuffers">FlatBuffers</a>.
However, while the former have external schemas and heavily restricted data types, rkyv allows
all serialized types to be defined in code and can serialize a wide variety of types that the
others cannot. Additionally, rkyv is designed to have little to no overhead, and in most cases
will perform exactly the same as native types.</p>
<h3 id="design"><a href="#design">Design</a></h3>
<p>Like <a href="https://serde.rs">serde</a>, rkyv uses Rust’s powerful trait system to serialize data without
the need for reflection. Despite having a wide array of features, you also only pay for what you
use. If your data checks out, the serialization process can be as simple as a <code>memcpy</code>! Like
serde, this allows rkyv to perform at speeds similar to handwritten serializers.</p>
<p>Unlike serde, rkyv produces data that is guaranteed deserialization free. If you wrote your data
to disk, you can just <code>mmap</code> your file into memory, cast a pointer, and your data is ready to
use. This makes it ideal for high-performance and IO-bound applications.</p>
<p>Limited data mutation is supported through <code>Pin</code> APIs, and archived values can be truly
deserialized with <a href="trait.Deserialize.html" title="Deserialize"><code>Deserialize</code></a> if full mutation capabilities are needed.</p>
<p><a href="https://rkyv.org">The book</a> has more details on the design and capabilities of rkyv.</p>
<h3 id="type-support"><a href="#type-support">Type support</a></h3>
<p>rkyv has a hashmap implementation that is built for zero-copy deserialization, so you can
serialize your hashmaps with abandon. The implementation performs perfect hashing with the
compress, hash and displace algorithm to use as little memory as possible while still performing
fast lookups.</p>
<p>It also comes with a B+ tree implementation that is built for maximum performance by splitting
data into easily-pageable 4KB segments. This makes it perfect for building immutable databases
and structures for bulk data.</p>
<p>rkyv also has support for contextual serialization, deserialization, and validation. It can
properly serialize and deserialize shared pointers like <code>Rc</code> and <code>Arc</code>, and can be extended to
support custom contextual types.</p>
<p>Finally, rkyv makes it possible to serialize trait objects and use them <em>as trait objects</em>
without deserialization. See the <code>archive_dyn</code> crate for more details.</p>
<h3 id="tradeoffs"><a href="#tradeoffs">Tradeoffs</a></h3>
<p>While rkyv is a great format for final data, it lacks a full schema system and isn’t well
equipped for data migration and schema upgrades. If your use case requires these capabilities,
you may need additional libraries the build these features on top of rkyv. You can use other
serialization frameworks like serde with the same types as rkyv conflict-free.</p>
<h3 id="features"><a href="#features">Features</a></h3>
<ul>
<li>
<p><code>alloc</code>: Enables types that require the <code>alloc</code> crate. Enabled by default.</p>
</li>
<li>
<p><code>arbitrary_enum_discriminant</code>: Enables the <code>arbitrary_enum_discriminant</code> feature for stable
multibyte enum discriminants using <code>archive_le</code> and <code>archive_be</code>. Requires nightly.</p>
</li>
<li>
<p><code>archive_be</code>: Forces archives into a big-endian format. This guarantees cross-endian
compatibility optimized for big-endian architectures.</p>
</li>
<li>
<p><code>archive_le</code>: Forces archives into a little-endian format. This guarantees cross-endian
compatibility optimized for little-endian architectures.</p>
</li>
<li>
<p><code>copy</code>: Enables copy optimizations for packed copyable data types. Requires nightly.</p>
</li>
<li>
<p><code>copy_unsafe</code>: Automatically opts all potentially copyable types into copy optimization. This
broadly improves performance but may cause uninitialized bytes to be copied to the output.
Requires nightly.</p>
</li>
<li>
<p><code>size_16</code>: Archives integral <code>*size</code> types as 16-bit integers. This is intended to be used
only for small archives and may not handle large, more general data.</p>
</li>
<li>
<p><code>size_32</code>: Archives integral <code>*size</code> types as 32-bit integers. Enabled by default.</p>
</li>
<li>
<p><code>size_64</code>: Archives integral <code>*size</code> types as 64-bit integers. This is intended to be used
only for very large archives and may cause unnecessary data bloat.</p>
</li>
<li>
<p><code>std</code>: Enables standard library support. Enabled by default.</p>
</li>
<li>
<p><code>strict</code>: Guarantees that types will have the same representations across platforms and
compilations. This is already the case in practice, but this feature provides a guarantee
along with C type compatibility.</p>
<p><em>Note</em>: Enabling <code>strict</code> will disable <a href="trait.Archive.html" title="Archive"><code>Archive</code></a> implementations for tuples, as tuples
do not have a C type layout. Making a generic <code>Tuple&lt;T1, T2&gt;</code> and deriving <a href="trait.Archive.html" title="Archive"><code>Archive</code></a> for it
should provide similar functionality.</p>
</li>
<li>
<p><code>validation</code>: Enables validation support through <code>bytecheck</code>.</p>
</li>
</ul>
<h3 id="crate-support"><a href="#crate-support">Crate support</a></h3>
<p>Some common crates need to be supported by rkyv before an official integration has been made.
Support is provided by rkyv for these crates, but in the future crates should depend on rkyv and
provide their own implementations. The crates that already have support provided by rkyv should
work toward integrating the implementations into themselves.</p>
<p>Crates supported by rkyv:</p>
<ul>
<li><a href="https://docs.rs/indexmap"><code>indexmap</code></a></li>
<li><a href="https://docs.rs/rend"><code>rend</code></a> <em>Enabled automatically when using endian-specific archive
features.</em></li>
<li><a href="https://docs.rs/tinyvec"><code>tinyvec</code></a></li>
<li><a href="https://docs.rs/uuid"><code>uuid</code></a></li>
</ul>
<p>Support for each of these crates can be enabled with a feature of the same name. Additionally,
the following external crate features are available:</p>
<ul>
<li><code>tinyvec_alloc</code>: Supports types behind the <code>alloc</code> feature in <code>tinyvec</code>.</li>
<li><code>uuid_std</code>: Enables the <code>std</code> feature in <code>uuid</code>.</li>
</ul>
<h3 id="examples"><a href="#examples">Examples</a></h3>
<ul>
<li>See <a href="trait.Archive.html" title="Archive"><code>Archive</code></a> for examples of how to use rkyv through the derive macro and manual
implementation.</li>
<li>For more details on the derive macro and its capabilities, see
<a href="derive.Archive.html"><code>Archive</code></a>.</li>
<li>Fully worked examples using rkyv are available in the
<a href="https://github.com/rkyv/rkyv/tree/master/examples"><code>examples</code> directory</a> of the source repo.</li>
</ul>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.rend"><code>pub use <a class="mod" href="../rend/index.html" title="mod rend">rend</a>;</code></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="util/index.html" title="mod rkyv::util">util</a>::*;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="boxed/index.html" title="rkyv::boxed mod">boxed</a></div><div class="item-right docblock-short">An archived version of <code>Box</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="collections/index.html" title="rkyv::collections mod">collections</a></div><div class="item-right docblock-short">Archived versions of standard library containers.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="de/index.html" title="rkyv::de mod">de</a></div><div class="item-right docblock-short">Deserialization traits, deserializers, and adapters.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="ffi/index.html" title="rkyv::ffi mod">ffi</a></div><div class="item-right docblock-short">Archived versions of FFI types.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="net/index.html" title="rkyv::net mod">net</a></div><div class="item-right docblock-short">Archived versions of network types.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="niche/index.html" title="rkyv::niche mod">niche</a></div><div class="item-right docblock-short">Manually niched type replacements.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="ops/index.html" title="rkyv::ops mod">ops</a></div><div class="item-right docblock-short">Archived versions of <code>ops</code> types.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="option/index.html" title="rkyv::option mod">option</a></div><div class="item-right docblock-short">An archived version of <code>Option</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="rc/index.html" title="rkyv::rc mod">rc</a></div><div class="item-right docblock-short">Archived versions of shared pointers.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="rel_ptr/index.html" title="rkyv::rel_ptr mod">rel_ptr</a></div><div class="item-right docblock-short">Relative pointer implementations and options.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="result/index.html" title="rkyv::result mod">result</a></div><div class="item-right docblock-short">An archived version of <code>Result</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="ser/index.html" title="rkyv::ser mod">ser</a></div><div class="item-right docblock-short">Serialization traits, serializers, and adapters.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="string/index.html" title="rkyv::string mod">string</a></div><div class="item-right docblock-short">Archived versions of string types.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="time/index.html" title="rkyv::time mod">time</a></div><div class="item-right docblock-short">Archived versions of <code>time</code> types.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="util/index.html" title="rkyv::util mod">util</a></div><div class="item-right docblock-short">Utilities for common archive operations.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="vec/index.html" title="rkyv::vec mod">vec</a></div><div class="item-right docblock-short">An archived version of <code>Vec</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="with/index.html" title="rkyv::with mod">with</a></div><div class="item-right docblock-short">Wrapper type support and commonly used wrappers.</div></div></div><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.from_archived.html" title="rkyv::from_archived macro">from_archived</a></div><div class="item-right docblock-short">Returns the unarchived value of the given archived primitive.</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.out_field.html" title="rkyv::out_field macro">out_field</a></div><div class="item-right docblock-short">Returns a tuple of <code>(field_pos, field_out)</code>, where <code>field_pos</code> is the “position”,
i.e. offset in bytes, of the field relative to the base address of the struct and <code>field_out</code>
is a <code>*mut</code> that points to the field directly.</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.to_archived.html" title="rkyv::to_archived macro">to_archived</a></div><div class="item-right docblock-short">Returns the archived value of the given archived primitive.</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Infallible.html" title="rkyv::Infallible struct">Infallible</a></div><div class="item-right docblock-short">A fallible type that cannot produce errors.</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Archive.html" title="rkyv::Archive trait">Archive</a></div><div class="item-right docblock-short">A type that can be used without deserializing.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ArchivePointee.html" title="rkyv::ArchivePointee trait">ArchivePointee</a></div><div class="item-right docblock-short">An archived type with associated metadata for its relative pointer.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ArchiveUnsized.html" title="rkyv::ArchiveUnsized trait">ArchiveUnsized</a></div><div class="item-right docblock-short">A counterpart of <a href="trait.Archive.html" title="Archive"><code>Archive</code></a> that’s suitable for unsized types.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Deserialize.html" title="rkyv::Deserialize trait">Deserialize</a></div><div class="item-right docblock-short">Converts a type back from its archived form.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.DeserializeUnsized.html" title="rkyv::DeserializeUnsized trait">DeserializeUnsized</a></div><div class="item-right docblock-short">A counterpart of <a href="trait.Deserialize.html" title="Deserialize"><code>Deserialize</code></a> that’s suitable for unsized types.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Fallible.html" title="rkyv::Fallible trait">Fallible</a></div><div class="item-right docblock-short">A type that can produce an error.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Serialize.html" title="rkyv::Serialize trait">Serialize</a></div><div class="item-right docblock-short">Converts a type to its archived form.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.SerializeUnsized.html" title="rkyv::SerializeUnsized trait">SerializeUnsized</a></div><div class="item-right docblock-short">A counterpart of <a href="trait.Serialize.html" title="Serialize"><code>Serialize</code></a> that’s suitable for unsized types.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Archived.html" title="rkyv::Archived type">Archived</a></div><div class="item-right docblock-short">Alias for the archived version of some <a href="trait.Archive.html" title="Archive"><code>Archive</code></a> type.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ArchivedMetadata.html" title="rkyv::ArchivedMetadata type">ArchivedMetadata</a></div><div class="item-right docblock-short">Alias for the archived metadata for some <a href="trait.ArchiveUnsized.html" title="ArchiveUnsized"><code>ArchiveUnsized</code></a> type.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.FixedIsize.html" title="rkyv::FixedIsize type">FixedIsize</a></div><div class="item-right docblock-short">The native type that <code>isize</code> is converted to for archiving.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.FixedUsize.html" title="rkyv::FixedUsize type">FixedUsize</a></div><div class="item-right docblock-short">The native type that <code>usize</code> is converted to for archiving.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.MetadataResolver.html" title="rkyv::MetadataResolver type">MetadataResolver</a></div><div class="item-right docblock-short">Alias for the metadata resolver for some <a href="trait.ArchiveUnsized.html" title="ArchiveUnsized"><code>ArchiveUnsized</code></a> type.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.RawRelPtr.html" title="rkyv::RawRelPtr type">RawRelPtr</a></div><div class="item-right docblock-short">The default raw relative pointer.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.RelPtr.html" title="rkyv::RelPtr type">RelPtr</a></div><div class="item-right docblock-short">The default relative pointer.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Resolver.html" title="rkyv::Resolver type">Resolver</a></div><div class="item-right docblock-short">Alias for the resolver for some <a href="trait.Archive.html" title="Archive"><code>Archive</code></a> type.</div></div></div><h2 id="derives" class="small-section-header"><a href="#derives">Derive Macros</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.Archive.html" title="rkyv::Archive derive">Archive</a></div><div class="item-right docblock-short">Derives <code>Archive</code> for the labeled type.</div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.Deserialize.html" title="rkyv::Deserialize derive">Deserialize</a></div><div class="item-right docblock-short">Derives <code>Deserialize</code> for the labeled type.</div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.Serialize.html" title="rkyv::Serialize derive">Serialize</a></div><div class="item-right docblock-short">Derives <code>Serialize</code> for the labeled type.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="rkyv" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.2 (9eb3afe9e 2023-03-27)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-08ddfdda51b8ee2e.css" ></div></body></html>